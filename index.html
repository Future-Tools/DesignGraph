<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>UML Force Graph</title>
  <style>
    body { margin: 0; overflow: hidden; background: #000; }
    #3d-graph { width: 100vw; height: 100vh; }
  </style>

  <!-- Include dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.148.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/3d-force-graph"></script>
</head>
<body>
  <div id="3d-graph"></div>

  <script>
    // Sample UML-like structure
    const gData = {
      nodes: [
        { id: 'Application' },
        { id: 'User' },
        { id: 'Organisation' },
        { id: 'Role' },
        { id: 'Permission' },
        { id: 'AuditLog' }
      ],
      links: [
        { source: 'Application', target: 'User' },
        { source: 'User', target: 'Role' },
        { source: 'Role', target: 'Permission' },
        { source: 'Organisation', target: 'User' },
        { source: 'Application', target: 'AuditLog' }
      ]
    };

    const Graph = ForceGraph3D()
      (document.getElementById('3d-graph'))
      .graphData(gData)
      .backgroundColor("#000000")
      .nodeAutoColorBy("id")
      .nodeLabel(node => node.id)
      .linkColor(() => "rgba(255,255,255,0.15)")
      .linkWidth(1)
      .linkOpacity(0.5)
      .nodeOpacity(0.9)
      .nodeThreeObject(node => {
        // Custom spherical nodes (smooth, consistent with vasturiano)
        const geometry = new THREE.SphereGeometry(4, 32, 32);
        const material = new THREE.MeshStandardMaterial({ color: node.color });
        const sphere = new THREE.Mesh(geometry, material);
        return sphere;
      })
      .nodeThreeObjectExtend(true)
      .onNodeClick(node => {
        // Zoom to node
        const distance = 40;
        const distRatio = 1 + distance / Math.hypot(node.x, node.y, node.z);
        Graph.cameraPosition(
          { x: node.x * distRatio, y: node.y * distRatio, z: node.z * distRatio },
          node,
          3000
        );
      });

    // Add lighting like vasturiano's version
    Graph
      .lights([
        new THREE.AmbientLight(0xcccccc, 1.5),
        new THREE.DirectionalLight(0xffffff, 0.6)
      ]);
  </script>
</body>
</html>


